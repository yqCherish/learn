{"remainingRequest":"/Users/qiye/self-design/learn-hard-hard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiye/self-design/learn-hard-hard/src/components/allPuzzle.vue?vue&type=style&index=0&id=ba1a6c42&scoped=true&lang=css&","dependencies":[{"path":"/Users/qiye/self-design/learn-hard-hard/src/components/allPuzzle.vue","mtime":1620119179718},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/css-loader/dist/cjs.js","mtime":1617783390917},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1624452809876},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/postcss-loader/src/index.js","mtime":1609310294819},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/cache-loader/dist/cjs.js","mtime":1617783390697},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/vue-loader/lib/index.js","mtime":1624452809876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNvbnRhaW5lciB7CiAgd2lkdGg6IDMwMHB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgbGVmdDogMDsKICByaWdodDogMDsKICBtYXJnaW46IDAgYXV0bzsKfQouaGVsbG8gewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBmbGV4LXdyYXA6IHdyYXA7CiAgbWFyZ2luOiAyMHB4IDA7Cn0KLm1haW4gewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIHdpZHRoOiAzMDBweDsKICBib3gtc2hhZG93OiAwIDAgMnB4IDJweCAjOTI5MDkwOwogIGJvcmRlci1yYWRpdXM6IDNweDsKfQouZGVmYXVsdEltZ3sKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1OXB4Owp9Ci5kZWZhdWx0SW1nIGltZ3sKICB3aWR0aDogMzAwcHg7CiAgaGVpZ2h0OiAzMDBweDsKfQouZGVmYXVsdEltZyBkaXZ7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogNjBweDsKICBmb250LXNpemU6IDEwMHB4OwogIG1hcmdpbjogYXV0bzsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbGVmdDogMDsKICByaWdodDogMDsKICBjb2xvcjogY3lhbjsKfQoubGlzdC1ncm91cC1pdGVtIHsKICB3aWR0aDogMTAwcHg7CiAgaGVpZ2h0OiAxMDBweDsKICBsaXN0LXN0eWxlOiBub25lOwogIGN1cnNvcjogbW92ZTsKfQoubGlzdC1ncm91cC1pdGVtIGltZyB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwp9Ci5ub3RlIHsKICBtYXJnaW46IDQwcHg7CiAgZm9udC1zaXplOiAxMnB4Owp9Ci5naG9zdCB7CiAgb3BhY2l0eTogMC41OwogIGJhY2tncm91bmQ6ICNjOGViZmI7Cn0K"},{"version":3,"sources":["allPuzzle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"allPuzzle.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\" :key=\"key_index\">\n    <div v-show=\"visible\" class=\"defaultImg\">\n      <img :src=\"imgUrl\" alt=\"\" />\n      <div>{{timer}}</div>\n    </div>\n    <draggable\n        class=\"main\"\n        ghost-class=\"ghost\"\n        :animation=\"400\"\n        @end=\"moveEvent\"\n    >\n      <li\n          class=\"list-group-item\"\n          v-for=\"(element, idx) in list\"\n          :key=\"idx\"\n      >\n        <!--  <img :src=\"element.url\" alt=\"\" /> -->\n        <canvas class=\"item\" :id=\"'mycnavas_'+element.id\" :sortid=\"element.id\" width=\"100\" height=\"100\"></canvas>\n      </li>\n    </draggable>\n    <canvas v-show=\"false\" id=\"mycnavas\" width=\"100\" height=\"100\"></canvas>\n    <VanButton v-if=\"timer <= 0\" style=\"margin-top: 20px;\" type=\"info\" plain @click=\"switchState\">\n      {{visible ? \"了然于胸，继续拼图\" : \"忘了原图，点击切换\"}}\n    </VanButton>\n  </div>\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\nimport { Dialog } from 'vant';\nexport default {\n  props: {\n    key_index: Number\n  },\n  components: {\n    draggable,\n  },\n  name: \"allPuzzle\",\n  data() {\n    return {\n      imgUrlList: [\n        require(\"@/assets/img/dog.jpg\"),\n        require(\"@/assets/img/nana.jpeg\"),\n        require(\"@/assets/img/house.jpeg\"),\n      ],\n      msgList: [0, 2, 5],\n      timer:\"\",//计时器\n      list: [\n        {\n          id: 0,\n        },\n        {\n          id: 1,\n        },\n        {\n          id: 2,\n        },\n        {\n          id: 3,\n        },\n        {\n          id: 4,\n        },\n        {\n          id: 5,\n        },\n        {\n          id: 6,\n        },\n        {\n          id: 7,\n        },\n        {\n          id: 8,\n        },\n      ],\n      visible: true\n    }\n  },\n  computed: {\n    imgUrl: function() {\n      console.log(\"key\", this.key_index);\n      return this.imgUrlList[this.key_index];\n    }\n  },\n  watch: {\n    key_index(){\n      this.start()\n    }\n  },\n  mounted() {\n    this.start();\n  },\n  methods: {\n    start(){\n      window.clearInterval(timer)\n      this.visible=true\n      this.step=0;\n      this.list = this.randomArray(this.list);\n      this.picCut9(this.imgUrl)\n      setTimeout(()=>{\n        this.visible=false\n      },3000)\n      this.timer=3;\n      let timer = setInterval(()=>{\n        this.timer--;\n        if(this.timer<=0){\n          window.clearInterval(timer)\n        }\n      },1000)\n    },\n    //打乱数组的顺序\n    randomArray(arr) {\n      return arr.sort(function () {\n        return Math.random() > 0.5 ? -1 : 1;\n      });\n    },\n    //判断结果\n    result(data) {\n      let arr = [...data];\n      let bool = true;\n      arr.sort(function (a, b) {\n        if (b > a) {\n          bool = false;\n        }\n      });\n      if (bool) {\n        const msg = \"撒花撒花！密码中含有数字\" + this.msgList[this.key_index];\n        Dialog({message: msg}).then(() => {\n          this.$emit(\"success\")\n        });\n      }\n    },\n    //拖动事件\n    moveEvent(){\n      this.step++;\n      let arr =  Array.from(document.getElementsByClassName(\"item\")).map(item=>{\n        return parseInt(item.getAttribute(\"sortid\"))\n      })\n      this.result(arr)\n    },\n    //九宫格切图\n    picCut9(imgurl) {\n      let mycnavas = document.getElementById(\"mycnavas\"); //现将图片放上去\n      let ctx = mycnavas.getContext(\"2d\");\n      ctx.clearRect(0,0,300,300);\n      let img = new Image();\n      img.onload = function () {\n        let imgwidth = img.width\n        let len = imgwidth / 3;\n        let arr = [];\n        for (let i = 0; i < imgwidth; ) {\n          for (let j = 0; j < imgwidth; ) {\n            arr.push({\n              x: j,\n              y: i,\n            });\n            j = j + len;\n          }\n          i = i + len;\n        }\n        arr = arr.map((item,k) => {\n          let canvas = document.getElementById(\"mycnavas_\"+k); //现将图片放上去\n          let ctx = canvas.getContext(\"2d\");\n          ctx.drawImage(\n              img,\n              item.x,\n              item.y,\n              len,\n              len,\n              0,\n              0,\n              100,\n              100\n          );\n          return item\n        });\n      };\n      img.src = imgurl\n    },\n    switchState() {\n      this.visible = !this.visible;\n    }\n  }\n}\n</script>\n\n<style  scoped>\n.container {\n  width: 300px;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.hello {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin: 20px 0;\n}\n.main {\n  display: flex;\n  flex-wrap: wrap;\n  width: 300px;\n  box-shadow: 0 0 2px 2px #929090;\n  border-radius: 3px;\n}\n.defaultImg{\n  position: absolute;\n  top: 59px;\n}\n.defaultImg img{\n  width: 300px;\n  height: 300px;\n}\n.defaultImg div{\n  position: absolute;\n  top: 60px;\n  font-size: 100px;\n  margin: auto;\n  text-align: center;\n  left: 0;\n  right: 0;\n  color: cyan;\n}\n.list-group-item {\n  width: 100px;\n  height: 100px;\n  list-style: none;\n  cursor: move;\n}\n.list-group-item img {\n  width: 100%;\n  height: 100%;\n}\n.note {\n  margin: 40px;\n  font-size: 12px;\n}\n.ghost {\n  opacity: 0.5;\n  background: #c8ebfb;\n}\n</style>\n\n"]}]}