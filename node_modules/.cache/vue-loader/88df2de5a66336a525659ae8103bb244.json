{"remainingRequest":"/Users/qiye/self-design/learn-hard-hard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiye/self-design/learn-hard-hard/src/components/allPuzzle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiye/self-design/learn-hard-hard/src/components/allPuzzle.vue","mtime":1620119179718},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/cache-loader/dist/cjs.js","mtime":1617783390697},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/babel-loader/lib/index.js","mtime":1609310248809},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/cache-loader/dist/cjs.js","mtime":1617783390697},{"path":"/Users/qiye/self-design/learn-hard-hard/node_modules/vue-loader/lib/index.js","mtime":1624452809876}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkcmFnZ2FibGUgZnJvbSAidnVlZHJhZ2dhYmxlIjsKaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSAndmFudCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAga2V5X2luZGV4OiBOdW1iZXIKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGRyYWdnYWJsZSwKICB9LAogIG5hbWU6ICJhbGxQdXp6bGUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWdVcmxMaXN0OiBbCiAgICAgICAgcmVxdWlyZSgiQC9hc3NldHMvaW1nL2RvZy5qcGciKSwKICAgICAgICByZXF1aXJlKCJAL2Fzc2V0cy9pbWcvbmFuYS5qcGVnIiksCiAgICAgICAgcmVxdWlyZSgiQC9hc3NldHMvaW1nL2hvdXNlLmpwZWciKSwKICAgICAgXSwKICAgICAgbXNnTGlzdDogWzAsIDIsIDVdLAogICAgICB0aW1lcjoiIiwvL+iuoeaXtuWZqAogICAgICBsaXN0OiBbCiAgICAgICAgewogICAgICAgICAgaWQ6IDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogMSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAyLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDMsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogNCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiA1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDYsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogNywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiA4LAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHZpc2libGU6IHRydWUKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpbWdVcmw6IGZ1bmN0aW9uKCkgewogICAgICBjb25zb2xlLmxvZygia2V5IiwgdGhpcy5rZXlfaW5kZXgpOwogICAgICByZXR1cm4gdGhpcy5pbWdVcmxMaXN0W3RoaXMua2V5X2luZGV4XTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBrZXlfaW5kZXgoKXsKICAgICAgdGhpcy5zdGFydCgpCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zdGFydCgpOwogIH0sCiAgbWV0aG9kczogewogICAgc3RhcnQoKXsKICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGltZXIpCiAgICAgIHRoaXMudmlzaWJsZT10cnVlCiAgICAgIHRoaXMuc3RlcD0wOwogICAgICB0aGlzLmxpc3QgPSB0aGlzLnJhbmRvbUFycmF5KHRoaXMubGlzdCk7CiAgICAgIHRoaXMucGljQ3V0OSh0aGlzLmltZ1VybCkKICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgIHRoaXMudmlzaWJsZT1mYWxzZQogICAgICB9LDMwMDApCiAgICAgIHRoaXMudGltZXI9MzsKICAgICAgbGV0IHRpbWVyID0gc2V0SW50ZXJ2YWwoKCk9PnsKICAgICAgICB0aGlzLnRpbWVyLS07CiAgICAgICAgaWYodGhpcy50aW1lcjw9MCl7CiAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aW1lcikKICAgICAgICB9CiAgICAgIH0sMTAwMCkKICAgIH0sCiAgICAvL+aJk+S5seaVsOe7hOeahOmhuuW6jwogICAgcmFuZG9tQXJyYXkoYXJyKSB7CiAgICAgIHJldHVybiBhcnIuc29ydChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgPiAwLjUgPyAtMSA6IDE7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Yik5pat57uT5p6cCiAgICByZXN1bHQoZGF0YSkgewogICAgICBsZXQgYXJyID0gWy4uLmRhdGFdOwogICAgICBsZXQgYm9vbCA9IHRydWU7CiAgICAgIGFyci5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgaWYgKGIgPiBhKSB7CiAgICAgICAgICBib29sID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKGJvb2wpIHsKICAgICAgICBjb25zdCBtc2cgPSAi5pKS6Iqx5pKS6Iqx77yB5a+G56CB5Lit5ZCr5pyJ5pWw5a2XIiArIHRoaXMubXNnTGlzdFt0aGlzLmtleV9pbmRleF07CiAgICAgICAgRGlhbG9nKHttZXNzYWdlOiBtc2d9KS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiKQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/mi5bliqjkuovku7YKICAgIG1vdmVFdmVudCgpewogICAgICB0aGlzLnN0ZXArKzsKICAgICAgbGV0IGFyciA9ICBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIml0ZW0iKSkubWFwKGl0ZW09PnsKICAgICAgICByZXR1cm4gcGFyc2VJbnQoaXRlbS5nZXRBdHRyaWJ1dGUoInNvcnRpZCIpKQogICAgICB9KQogICAgICB0aGlzLnJlc3VsdChhcnIpCiAgICB9LAogICAgLy/kuZ3lrqvmoLzliIflm74KICAgIHBpY0N1dDkoaW1ndXJsKSB7CiAgICAgIGxldCBteWNuYXZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJteWNuYXZhcyIpOyAvL+eOsOWwhuWbvueJh+aUvuS4iuWOuwogICAgICBsZXQgY3R4ID0gbXljbmF2YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsMzAwLDMwMCk7CiAgICAgIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgaW1nd2lkdGggPSBpbWcud2lkdGgKICAgICAgICBsZXQgbGVuID0gaW1nd2lkdGggLyAzOwogICAgICAgIGxldCBhcnIgPSBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltZ3dpZHRoOyApIHsKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW1nd2lkdGg7ICkgewogICAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgICAgeDogaiwKICAgICAgICAgICAgICB5OiBpLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaiA9IGogKyBsZW47CiAgICAgICAgICB9CiAgICAgICAgICBpID0gaSArIGxlbjsKICAgICAgICB9CiAgICAgICAgYXJyID0gYXJyLm1hcCgoaXRlbSxrKSA9PiB7CiAgICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15Y25hdmFzXyIrayk7IC8v546w5bCG5Zu+54mH5pS+5LiK5Y67CiAgICAgICAgICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgICBjdHguZHJhd0ltYWdlKAogICAgICAgICAgICAgIGltZywKICAgICAgICAgICAgICBpdGVtLngsCiAgICAgICAgICAgICAgaXRlbS55LAogICAgICAgICAgICAgIGxlbiwKICAgICAgICAgICAgICBsZW4sCiAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAwLAogICAgICAgICAgICAgIDEwMCwKICAgICAgICAgICAgICAxMDAKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gaXRlbQogICAgICAgIH0pOwogICAgICB9OwogICAgICBpbWcuc3JjID0gaW1ndXJsCiAgICB9LAogICAgc3dpdGNoU3RhdGUoKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9ICF0aGlzLnZpc2libGU7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["allPuzzle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"allPuzzle.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"hello\" :key=\"key_index\">\n    <div v-show=\"visible\" class=\"defaultImg\">\n      <img :src=\"imgUrl\" alt=\"\" />\n      <div>{{timer}}</div>\n    </div>\n    <draggable\n        class=\"main\"\n        ghost-class=\"ghost\"\n        :animation=\"400\"\n        @end=\"moveEvent\"\n    >\n      <li\n          class=\"list-group-item\"\n          v-for=\"(element, idx) in list\"\n          :key=\"idx\"\n      >\n        <!--  <img :src=\"element.url\" alt=\"\" /> -->\n        <canvas class=\"item\" :id=\"'mycnavas_'+element.id\" :sortid=\"element.id\" width=\"100\" height=\"100\"></canvas>\n      </li>\n    </draggable>\n    <canvas v-show=\"false\" id=\"mycnavas\" width=\"100\" height=\"100\"></canvas>\n    <VanButton v-if=\"timer <= 0\" style=\"margin-top: 20px;\" type=\"info\" plain @click=\"switchState\">\n      {{visible ? \"了然于胸，继续拼图\" : \"忘了原图，点击切换\"}}\n    </VanButton>\n  </div>\n</template>\n\n<script>\nimport draggable from \"vuedraggable\";\nimport { Dialog } from 'vant';\nexport default {\n  props: {\n    key_index: Number\n  },\n  components: {\n    draggable,\n  },\n  name: \"allPuzzle\",\n  data() {\n    return {\n      imgUrlList: [\n        require(\"@/assets/img/dog.jpg\"),\n        require(\"@/assets/img/nana.jpeg\"),\n        require(\"@/assets/img/house.jpeg\"),\n      ],\n      msgList: [0, 2, 5],\n      timer:\"\",//计时器\n      list: [\n        {\n          id: 0,\n        },\n        {\n          id: 1,\n        },\n        {\n          id: 2,\n        },\n        {\n          id: 3,\n        },\n        {\n          id: 4,\n        },\n        {\n          id: 5,\n        },\n        {\n          id: 6,\n        },\n        {\n          id: 7,\n        },\n        {\n          id: 8,\n        },\n      ],\n      visible: true\n    }\n  },\n  computed: {\n    imgUrl: function() {\n      console.log(\"key\", this.key_index);\n      return this.imgUrlList[this.key_index];\n    }\n  },\n  watch: {\n    key_index(){\n      this.start()\n    }\n  },\n  mounted() {\n    this.start();\n  },\n  methods: {\n    start(){\n      window.clearInterval(timer)\n      this.visible=true\n      this.step=0;\n      this.list = this.randomArray(this.list);\n      this.picCut9(this.imgUrl)\n      setTimeout(()=>{\n        this.visible=false\n      },3000)\n      this.timer=3;\n      let timer = setInterval(()=>{\n        this.timer--;\n        if(this.timer<=0){\n          window.clearInterval(timer)\n        }\n      },1000)\n    },\n    //打乱数组的顺序\n    randomArray(arr) {\n      return arr.sort(function () {\n        return Math.random() > 0.5 ? -1 : 1;\n      });\n    },\n    //判断结果\n    result(data) {\n      let arr = [...data];\n      let bool = true;\n      arr.sort(function (a, b) {\n        if (b > a) {\n          bool = false;\n        }\n      });\n      if (bool) {\n        const msg = \"撒花撒花！密码中含有数字\" + this.msgList[this.key_index];\n        Dialog({message: msg}).then(() => {\n          this.$emit(\"success\")\n        });\n      }\n    },\n    //拖动事件\n    moveEvent(){\n      this.step++;\n      let arr =  Array.from(document.getElementsByClassName(\"item\")).map(item=>{\n        return parseInt(item.getAttribute(\"sortid\"))\n      })\n      this.result(arr)\n    },\n    //九宫格切图\n    picCut9(imgurl) {\n      let mycnavas = document.getElementById(\"mycnavas\"); //现将图片放上去\n      let ctx = mycnavas.getContext(\"2d\");\n      ctx.clearRect(0,0,300,300);\n      let img = new Image();\n      img.onload = function () {\n        let imgwidth = img.width\n        let len = imgwidth / 3;\n        let arr = [];\n        for (let i = 0; i < imgwidth; ) {\n          for (let j = 0; j < imgwidth; ) {\n            arr.push({\n              x: j,\n              y: i,\n            });\n            j = j + len;\n          }\n          i = i + len;\n        }\n        arr = arr.map((item,k) => {\n          let canvas = document.getElementById(\"mycnavas_\"+k); //现将图片放上去\n          let ctx = canvas.getContext(\"2d\");\n          ctx.drawImage(\n              img,\n              item.x,\n              item.y,\n              len,\n              len,\n              0,\n              0,\n              100,\n              100\n          );\n          return item\n        });\n      };\n      img.src = imgurl\n    },\n    switchState() {\n      this.visible = !this.visible;\n    }\n  }\n}\n</script>\n\n<style  scoped>\n.container {\n  width: 300px;\n  text-align: center;\n  position: absolute;\n  left: 0;\n  right: 0;\n  margin: 0 auto;\n}\n.hello {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin: 20px 0;\n}\n.main {\n  display: flex;\n  flex-wrap: wrap;\n  width: 300px;\n  box-shadow: 0 0 2px 2px #929090;\n  border-radius: 3px;\n}\n.defaultImg{\n  position: absolute;\n  top: 59px;\n}\n.defaultImg img{\n  width: 300px;\n  height: 300px;\n}\n.defaultImg div{\n  position: absolute;\n  top: 60px;\n  font-size: 100px;\n  margin: auto;\n  text-align: center;\n  left: 0;\n  right: 0;\n  color: cyan;\n}\n.list-group-item {\n  width: 100px;\n  height: 100px;\n  list-style: none;\n  cursor: move;\n}\n.list-group-item img {\n  width: 100%;\n  height: 100%;\n}\n.note {\n  margin: 40px;\n  font-size: 12px;\n}\n.ghost {\n  opacity: 0.5;\n  background: #c8ebfb;\n}\n</style>\n\n"]}]}